@using Web.Data
@using Rehab.EndPoint.Web.ViewModels
@using Rehab.EndPoint.Web.Components.Common
@using Rehab.Application.Insurances
@using AutoMapper
@inject IInsuranceService InsuranceService
@inject AutoMapper.IMapper mapper

<section class="my-5 pt-5 container bg-white" id="insurance">
    <h2 class="section-title text-center">Accepted Insurances</h2>
    <CardList List="Insurancescards" 
        ItemsToShow="6"
        CustomClass="card-gs-2" 
        prefixImageURL="@serverUrl"
  />

        <div class="row px-4 mt-4">
            <a class="border-gradient text-blue-dark text-center"
           data-bs-toggle="modal"
           data-bs-target="#modal_all_insurances">
                
                Visit All Accepted Insurances</a>
        </div>
  
   
</section>

    <div class="modal fade custom-modal-backdrop"
         id="modal_all_insurances"
         tabindex="-1"
     aria-labelledby="modalLabel_all_insurances"
         aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered modal-lg">
            <div class="modal-content p-3">
            <h2 class="section-title text-center">All Accepted Insurances</h2>
            <CardList List="InsurancescardsAll"
                      ItemsToShow="6"
                      CustomClass="card-gs-2"
                      prefixImageURL="@serverUrl" />
            </div>
        </div>
    </div>

@code {
    [Inject] IConfiguration Config { get; set; } = default!;

    private string? serverUrl;
    private List<CardViewModel> Insurancescards = new();
    private List<CardViewModel> InsurancescardsAll = new();
    [Parameter] public FacilityViewModel Facility { get; set; } = new FacilityViewModel();

    protected override void OnInitialized()
    {
        serverUrl = Config["AppSettings:AdminServerUrl"];
        Insurancescards = mapper.Map<List<CardViewModel>>(InsuranceService.GetList());
        InsurancescardsAll = mapper.Map<List<CardViewModel>>(InsuranceService.GetList());
       }
}
